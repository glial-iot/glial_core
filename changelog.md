# История изменений

## Версия 0.74 (develop)

* Исправлена ошибка, приводящая к некорректному обновлению Glue
* Исправлена ошибка, в некоторых случаях приводящая к отрицательному времени в логах
* Исправлена ошибка, приводящая к невозможности удаления остановленных скриптов
* Исправлена ошибка, приводящая к ошибочному показу кнопки изменения обьекта в драйверах
* Исправлена ошибка, приводящая к неправильной маске при создании bus-event скриптов
* При переключении статуса активности скрипта, скрипт сохраняется автоматически
* Автоматический фокус на поля ввода в диалогах редактирования, отправка форм по нажатию Enter, закрытие форм по Esc
* Добавлена возможность создать резервную копию из панели управления
* Добавлены кнопки быстрого выбора частых вариантов обьектов (масок, расписаний, периодов, оконечных точек)
* Сортировка логов на стороне сервера для исправления проблем с показом логов с множественными записями уровня USER
* Показ в реальном времени топиков, подходящих под введенную маску в bus-event
* Функции копирования, сохранения и загрузки скриптов
* Первая версия профилировщика скриптов
* Теперь база данных с логами не попадает в резервную копию, что уменьшает размер резервной копии
* Теперь в логах сохраняется только последняя запись с уровнем REBOOT
* Добавлены функции set_type() и set_tags() для топиков в bus
* Добавлена возможность работы без репозитария GIT
* Добавлена система сборки deb-пакета
* Добавлены функциональные тесты
* Добавлена настройка WAL-директории и порта API
* Добавлен метод API get_pid
* Добавлены теги для скриптов и драйверов, а так же селектор тегов в интерфейсе
* Добавлены комментарии для скриптов и драйверов
* Исправлена ошибка, приводящая в некоторых случаях к неверной сортировке логов
* Добавлена кнопка "создать bus-еvent скрипт на основе адреса топика" в bus. 
* Удалена поддержка функции update_value()
* В систему встроена панель управления
* Теперь логи уровня USER и INFO не содержат trace
* Ротация логов: при нехватке памяти удаляются логи уровня USER


## Версия 0.73 (release)

* Рабочие теги в BUS
* Исправлена ошибка в set_value, приводящая к неработоспособности функции.
* Автоматический рестарт скриптов и драйверов при изменении имени, объекта, тела или статуса
* Корректное завершение скриптов и драйверов при удалении
* Изменение внутреннего API 
* Добавлены функции deepcopy() для копирования таблиц, и round() для округления с произвольной точностью
* В документацию добавлена краткая справка по языку Lua
* Исправлена проблема, приводящая к ошибке при запуске bus-event скрипта
* Исправлена ошибка в модуле shedule-event скриптов, приводящая к тому, что скрипты с ошибочным расписанием могли быть активными
* Исправлена ошибка в документации shedule-event скриптов
* В записях лога показывается период timer-event скриптов и расписание shedule-event скриптов, а так же подробные ошибки парсинга расписания
* Удалена возможность возвращать новое значение шины в bus-event скриптах через return x
* Удалена функциональность TSDB/Export. Теперь экспорт вынесен в userspace(bus-events/drivers)
* Изменен принцип сравнения топика с маской в bus-event: теперь сравнение происходит по всей строке вместо подстроки(ранее)
* Исправлена ошибка, приводящая к неверному сохранению масок для bus-event скриптов, если в них был символ "+"
* Добавлена кнопка "Run" в редакторе и окне информации скрипта
* Добавлена кнопка "i" в окне информации скрипта
* Добавлено авто-обновление логов и информации в окне информации скрипта
* Исправлена ошибка, приводящая к тому, что скрипты с синтаксическими ошибками было невозможно удалить
* Добавлена поддержка масок в драйверах

## Версия 0.72

* Функция update_value() переименована в set_value(), для сохранения единой семантики с функцией get_value()  
Функция update_value все еще поддерживается, но переходит в статус "устарела", и в будущих релизах будет удалена. 
* Добавлена возможность устанавливать произвольное время в функции set_value()
* Добавлена возможность проверять равенство старого и нового значения топика в BUS
* Timer-scripts теперь запускаются сразу после активации, а не спустя время цикла
* Добавления возможность получать доступ к хранилищам других скриптов с помощью main_store
* Исправлена ошибка, блокирующая выполнение event-скриптов, после первого совпадения маски
* Изменение внутреннего API системы
* Теперь get_value возвращает метаинформацию в дополнение к значению топика
* Документация вынесена в отдельный каталог и настроена для сборки статического сайта

## Версия 0.71

* Добавлена обработка ошибок при одиночном запуске event-scripts
* Изменение внутреннего API системы
* Переработана документация

## Версия 0.71

* Добавлена возможность создавать секции init и destroy в bus-event
* Теперь обновление системы затирает локальные изменения в коде
* Косметические правки

## Версия 0.66

* Добавлены shedule-event scripts
* Исправлена ошибка, приводящая к отсутствию логов
* Теперь процесс бекапа корректно работает с кооперативной многозадачностью
* Изменена система подсчета статистических системных значений


## Будущие функции
* Функция получения UUID скрипта по его имени
* Функции получения и изменения статуса и объекта других скриптов
* Поле "комментарий к скриптам"
* Геттер и сеттер для глобального хранилища
* Safe mode при нескольких неудачных перезапусках системы
* Новый механизм расчета времени для timer-scripts(системный, а не локальный)
* Математические функции обновления bus(update_value возвращается)
* Включение и выключение подробного(USER) логгирования на уровне скрипта(при выполнении)
* Вынос поле trace лога в отдельный запрос
* Часто используемые образцы кода в редакторе
* Функция слияния таблиц
