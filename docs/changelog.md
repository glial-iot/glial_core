# История изменений

## Версия 0.73 (develop)

* Рабочие теги в BUS
* Исправлена ошибка в set_value, приводящая к неработоспособности функции.
* Автоматический рестарт скриптов и драйверов при изменении имени, объекта, тела или статуса
* Корректное завершение скриптов и драйверов при удалении
* Изменение внутреннего API 
* Добавлены функции deepcopy() для копирования таблиц, и round() для округления с произвольной точностью
* В документацию добавлена краткая справка по языку Lua
* Исправлена проблема, приводящая к ошибке при запуске bus-event скрипта
* Исправлена ошибка в модуле shedule-event скриптов, приводящая к тому, что скрипты с ошибочным расписанием могли быть активными
* Исправлена ошибка в документации shedule-event скриптов
* В записях лога показывается период timer-event скриптов и расписание shedule-event скриптов, а так же подробные ошибки парсинга расписания
* Удалена возможность возвращать новое значение шины в bus-event скриптах через return x
* Удалена функциональность TSDB/Export. Теперь экспорт вынесен в userspace(bus-events/drivers)
* Изменен принцип сравнения топика с маской в bus-event: теперь сравнение происходит по всей строке вместо подстроки(ранее)
* Исправлена ошибка, приводящая к неверному сохранению масок для bus-event скриптов, если в них был символ "+"
* Добавлена кнопка "Run" в редакторе и окне информации скрипта
* Добавлена кнопка "i" в окне информации скрипта
* Добавлено авто-обновление логов и информации в окне информации скрипта
* Исправлена ошибка, приводящая к тому, что скрипты с синтаксиескими ошибками было невозможно удалить

## Версия 0.72 (release)

* Функция update_value() переименована в set_value(), для сохранения единой семантики с функцией get_value()  
Функция update_value все еще поддерживается, но переходит в статус "устарела", и в будущих релизах будет удалена. 
* Добавлена возможность устанавливать произвольное время в функции set_value()
* Добавлена возможность проверять равенство старого и нового значения топика в BUS
* Timer-scripts теперь запускаются сразу после активации, а не спустя время цикла
* Добавления возможность получать доступ к хранилищам других скриптов с помощью main_store
* Исправлена ошибка, блокирующая выполнение event-скриптов, после первого совпадения маски
* Изменение внутреннего API системы
* Теперь get_value возвращает метаинформацию в дополнение к значению топика
* Документация вынесена в отдельный каталог и настроена для сборки статического сайта

## Версия 0.71

* Добавлена обработка ошибок при одиночном запуске event-scripts
* Изменение внутреннего API системы
* Переработана документация

## Версия 0.71

* Добавлена возможность создавать секции init и destroy в bus-event
* Теперь обновление системы затирает локальные изменения в коде
* Косметические правки

## Версия 0.66

* Добавлены shedule-event scripts
* Исправлена ошибка, приводящая к отсутствию логов
* Теперь процесс бекапа корректно работает с кооперативной многозадачностью
* Изменена система подсчета статистических системных значений


## Будущие функции
* Профилирование времени работы скриптов
* Кнопка "создать бекап"
* Динамический показ топиков, подходящих под текущую маску при создании bus-event скрипта или изменении топика
* Дублирование скриптов из панели управления
* Загрузки и восстановления отдельных скриптов из панели управления
* Сортировка логов на стороне сервера
* Функция получения UUID скрипта по его имени
* Функции получения и изменения статуса и объекта других скриптов
* Поле "комментарий к скриптам"
* Геттер и сеттер для глобального хранилища
* Safe mode при нескольких неудачных перезапусках системы
* Новый механизм расчета времени для timer-scripts(системный, а не локальный)
* Поддержка масок в драйверах
* Математические функции обновления bus(update_value возвращается)
* Включение и выключение подробного(USER) логгирования на уровне скрипта(при выполнении)
* Вынос поле trace лога в отдельный запрос
* Расширенная система тегов с глобальной сортировкой для скриптов
* Часто используемые образцы кода в редакторе
* Функция слияния таблиц
* Быстрый выбор расписания, периода и подстановок для масок
